function wpTimeMachine_toggle(a,b,c){if(jQuery("#"+a).attr("value")=="false"){var d=!0;jQuery("#"+a).html(b).removeClass("wpTM_unchecked").addClass("wpTM_checked")}else{var d=!1;jQuery("#"+a).html(c).removeClass("wpTM_checked").addClass("wpTM_unchecked")}(a=="show_info"||a=="show_options")&&jQuery("#"+a).removeClass("wpTM_checked").removeClass("wpTM_unchecked");if(a=="format"){if(jQuery("#"+a).attr("value")=="zip"){jQuery("#"+a).text(b).attr("value","tar");jQuery("#"+a+"_label").text(".tar.gz")}else{jQuery("#"+a).text(c).attr("value","zip");jQuery("#"+a+"_label").text(".zip")}var d=jQuery("#"+a).attr("value")}jQuery("#"+a).attr("value",d);a=="use_timestamp_dir"&&jQuery("input[name='use_timestamp_dir']").val(d);a=="use_post_pub"&&jQuery("input[name='use_post_pub']").val(d);var e=(new Date).getTime();jQuery.ajax({data:"page=wpTimeMachineCore.php&time="+e+"&ajax=1&"+a+"="+d,url:"options-general.php"})}function wpTimeMachine_toggle_host_field(a){var b=jQuery("label[for='remote_host'],input[name='remote_host'],#remote_host_advice");a!="ftp"?b.hide():b.show()}function wpTimeMachine_Notification(a){if(window.webkitNotifications){var b=window.webkitNotifications;b.checkPermission()?b.requestPermission(wpTimeMachine_NotificationResponse):wpTimeMachine_NotificationResponse(a)}}function wpTimeMachine_NotificationResponse(a){try{var b=window.webkitNotifications,c=b.createNotification("http://dev.chromium.org/_/rsrc/1220198801738/config/app/images/customLogo/customLogo.gif","Your archive has been completed:",a);c.show()}catch(d){}}function show_help(a){jQuery("p.help").hide();jQuery(a).show()}jQuery(document).ready(function(){wpTimeMachine_toggle_host_field(offsite);if(wpTimeMachinePHP=="php4"){jQuery("label[for='remote_user']").text(ftp_labels[0]+": ");jQuery("label[for='remote_pass']").text(ftp_labels[1]+": ");jQuery("label[for='remote_path']").text(ftp_labels[2]+": ");jQuery(".remote_pass_label").text(ftp_labels[1]);jQuery(".offsite_name").text(ftp_labels[3])}else jQuery(".remote_pass_label").text(remote_pass_label);jQuery("a[value='false']").each(function(){jQuery(this).addClass("wpTM_unchecked")});jQuery("a[value='true']").each(function(){jQuery(this).addClass("wpTM_checked")});jQuery("#show_info").click(function(a){a.preventDefault();jQuery("#Info").toggle();jQuery(".wpTimeMachineOptions").hide()});jQuery("#use_log").click(function(a){a.preventDefault();wpTimeMachine_toggle("use_log",use_log_labels[0],use_log_labels[1])});jQuery("#show_options").click(function(a){a.preventDefault();jQuery(".wpTimeMachineOptions").toggle();jQuery("#Info").hide()});jQuery("#format").click(function(a){a.preventDefault();wpTimeMachine_toggle("format",format_labels[0],format_labels[1])});jQuery("#use_post_pub").click(function(a){a.preventDefault();wpTimeMachine_toggle("use_post_pub",use_post_pub_labels[0],use_post_pub_labels[1])});jQuery("#use_timestamp_dir").click(function(a){a.preventDefault();wpTimeMachine_toggle("use_timestamp_dir",use_timestamp_dir_labels[0],use_timestamp_dir_labels[1])});jQuery("#exclude_cache").click(function(a){a.preventDefault();wpTimeMachine_toggle("exclude_cache",exclude_cache_labels[0],exclude_cache_labels[1])});jQuery("#remote_pass_storage").click(function(a){a.preventDefault();wpTimeMachine_toggle("remote_pass_storage",remote_pass_storage_labels[0],remote_pass_storage_labels[1])});jQuery("#clear_log").click(function(a){a.preventDefault();var b=(new Date).getTime();jQuery.ajax({data:"page=wpTimeMachineCore.php&clear_log=true&_ajax_nonce="+__nonce__+"&time="+b,url:"options-general.php"})});jQuery(".rd").click(function(){var a=jQuery(this).val();wpTimeMachine_switch_offsite_labels(a);jQuery.ajax({data:"page=wpTimeMachineCore.php&ajax_settings_only=1&set_offsite=1&offsite="+a,url:"options-general.php"})});jQuery("#submit_package_request").click(function(){var a=(new Date).getTime(),b=jQuery("#wpTimeMachine_generator_form").attr("action");jQuery("#wpTimeMachine_generator_form").attr("action",b+"&time="+a)});jQuery("#wpTimeMachine_generator_form").ajaxForm({beforeSubmit:function(){jQuery.modal.close();jQuery("div.wpTimeMachine_progress").modal({opacity:60,overlayCss:{backgroundColor:"#fff"}})},success:function(a){jQuery.modal.close();var b=jQuery(a).find("span#update").text();jQuery("div#RecentInfo").css({opacity:"1.0",display:"block"}).html(b);if(b=="Archiving failed")jQuery("div.wpTimeMachine_error").modal({opacity:60,overlayCss:{backgroundColor:"#fff"}});else{jQuery("div.wpTimeMachine_complete").modal({opacity:60,overlayCss:{backgroundColor:"#fff"}});jQuery.ajax({async:!1,data:"page=wpTimeMachineCore.php&clean=1",url:"options-general.php"});var c="Visit "+jQuery(".offsite_name").text()+" to verify receipt.";wpTimeMachine_Notification(c)}},error:function(){jQuery.modal.close();jQuery("div.wpTimeMachine_error").modal({opacity:60,overlayCss:{backgroundColor:"#fff"}})}})});